<!DOCTYPE html>
<html>
  <head>
    <title>Pie Chart</title>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script type="text/javascript" src="jquery.contextmenu.r2.js"></script>
<script type="text/javascript">jQuery.noConflict();</script>
    <script type="text/javascript" src="data.js"></script>
    <script type="text/javascript" src="theopenbudget.js"></script>
<script type="text/javascript">entities.push(openbudget);</script>
	<script type="text/javascript" src="parenting.js"></script>
	<script type="text/javascript" src="viewstate.js"></script>
    <script type="text/javascript" src="viewobj.js"></script>
	<script type="text/javascript" src="events.js"></script>
<link rel="stylesheet" href="vis-gen.css" />
  </head>
  <body>
<!--[if lt IE 9]>
Hi! You seem to be using Internet Explorer 8 or below. Unfortunately this website only functions on modern, standards-compliant browsers such as:
<ul>
  <li><a href="http://windows.microsoft.com/en-AU/internet-explorer/products/ie/home">Internet Explorer 9</a></li>
  <li><a href="http://www.google.com/chrome">Google Chrome</a></li>
  <li><a href="http://www.getfirefox.com/">Mozilla Firefox</a></li>
  <li><a href="http://www.apple.com/safari/">Safari</a></li>
  <li><a href="http://www.opera.com/">Opera</a>
  </ul>
  Please try again with one of those.<br />
  <style type="text/css">
  #tourCaption, #rightToolBox {
  display: none;
  }
  </style>
  <![endif]-->
  <div style="float:right; width:200px;">
<div id="rightToolBox" style="position:fixed;"
  onmousedown="javascript:event.stopPropagation();"
  onmouseup="javascript:event.stopPropagation();">
<a href="#" onClick="javascript:viewstate.zoom(4/3); return false;">Zoom in</a><br/>
<a href="#" onClick="javascript:viewstate.zoom(3/4); return false;">Zoom out</a><br/>
Drag things around, double-click, right-click, use the scroll wheel: explore!
<hr />
<!--  <select onChange="javascript:periodChange(this);" id="periodSelector">
	<option value="2010-11">2010-11</option>
	<option value="2011-12" selected="selected">2011-12</option>
  </select>
  <hr/>-->
  <select id="entitySel" style="width:190px;"></select><br/>
  <input type="button" id="entityAdd"  onClick="javascript:addEntity();" value="Add Entity"></input>
  </div>
  </div>
  <script type="text/javascript">
  
	function periodChange(sel) {
	  var chosenoption=sel.options[sel.selectedIndex];
      viewstate.children().map(function(obj) {obj.period(chosenoption.value);});
	  viewstate.children().map(function(obj) {obj.render();});
	}

  function addEntity() {

  var entitySel = jQuery('#entitySel')[0];
  viewstate.beginAddingView( entities[entitySel.selectedIndex] );
  
  }

  var entitySel = jQuery('#entitySel');
  jQuery.each( entities, function(index) {
      entitySel.append( jQuery('<option />').val( index ).text( entities[index].name ) );
	} );
		
  
  window.viewstate=new ViewState(d3.select("body").append("svg"));

  var vo = new ViewObj( openbudget, viewstate, [0,0] );
  vo.period('2011-12');
  vo.render();

  </script>
<div id="wedgeMenu" class="contextMenu">
  <ul>
    <li id="deleteMenuItem">Delete</li>
    <li id="centreViewMenuItem">Centre view on</li>
    <!--<li id="duplicateMenuItem">Duplicate</li>-->
	<li id="resetMenuItem">Reset</li>
  </ul>
  </div>
  <div id="wedge2Menu" class="contextMenu">
  <ul>
    <li id="deleteMenuItem">Delete</li>
    <li id="centreViewMenuItem">Centre view on</li>
    <li id="popBothMenuItem">Expand both</li>
	<li id="resetMenuItem">Reset</li>
  </ul>
  </div>

  </body>
</html>
